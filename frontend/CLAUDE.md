# frontend

React 18 + Vite + TypeScript web app. Run all commands from this directory.

## Stack

- React 18, React Router v6
- Tailwind CSS v3 + `@tailwindcss/typography`
- `react-markdown` + `remark-gfm`
- Vite 5

## Commands

```bash
npm install
npm run dev      # http://localhost:5173
npm run build    # type-check + bundle → dist/
```

## Structure

```
src/
├── App.tsx              # Root component and routing
├── types.ts             # Shared TypeScript types (LessonMeta, Question, etc.)
├── components/          # TopNav, StudySubNav, Sidebar, MarkdownViewer
├── hooks/               # useMarkdown (static files), useExercises (API)
└── pages/               # StudyLessons, StudyNouns, StudyVerbs, Exercise
public/
└── data/a1/             # Generated by ingestion scripts — do not edit manually
    ├── index.json
    ├── lessons/
    ├── nouns/
    └── verbs/
```

## Routes

| Path | Component |
|---|---|
| `/` | Redirect → `/study/lessons/1` |
| `/study/lessons/:lessonId` | `StudyLessons` with sidebar |
| `/study/nouns` | `StudyNouns` |
| `/study/verbs` | `StudyVerbs` |
| `/exercise` | `Exercise` |

## Environment variables

`VITE_EXERCISES_API_URL` — API Gateway base URL. Set in Amplify Console for production. For local testing create `frontend/.env.local`:
```
VITE_EXERCISES_API_URL=https://<api-id>.execute-api.<region>.amazonaws.com/prod/exercises
```

## Notes

- Static data in `public/data/a1/` must exist before running `npm run dev`. Generate it with `python3 ingestion/split_lessons.py` and `python3 ingestion/merge_tables.py` from the repo root.
- `tsconfig.json` includes `"types": ["vite/client"]` for `import.meta.env` support.
- `public/_redirects` handles SPA routing on Amplify (`/* /index.html 200`).
